%% LyX 2.1.3 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[english,12pt]{infommreport}
\usepackage[T1]{fontenc}
%\usepackage[latin9]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage{biblatex}
\addbibresource{BT_final_refs.bib}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{physics}
\usepackage{subcaption}
\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.


%\renewcommand{\submittedtext}{A technical report for} %comment this out if you don't want to change the writing
\project{InFoMM CDT Mini-Project 1}     %the degree
\projectdate{Trinity 2018}         %the degree date
\company{BT}
\supervisors{Renaud Lambiotte, Andrew Mellor, \\
Stephen Brewis, Stephen Cassidy}%Include industrial and academic supervisors


\title{Objective-oriented Organisational Decision Making}
\author{Ka Man (Ambrose) Yim}

%\makeatother

\usepackage{babel}
\begin{document}

\maketitle
\tableofcontents
\newpage
\section{Introduction}
We can think of an organisation as a problem solving machinery. A problem facing a company like Ford or BMW might be to build a certain number of cars in a month to a certain specification; the problem facing BBC is to make programmes that fit their organisational objectives to `inform, educate and entertain', subject to regulatory oversight and budget restrictions. A restaurant's problem is to make delicious food at an attractive price \emph{sans e. coli}.

The type of problems an organisation tackles are those which are too large and complex to be solved by a single person with reasonable efficiency. Hence labour is divided between many people, each person serving some function with different capabilities. This process is analogous to decomposing computations on a computer into several processes and solving them in parallel on multiple processing cores. However, unlike computer processes that execute a fixed set of instructions, humans (allegedly) have free will and agency. Thus an organisation makes its own decisions and has a life of its own through the manifold interactions and emails between people. Decision-making in organisations are rarely made in isolation by a single person. Behind each decision there is a complex web of influence and information transfer (or lack thereof). In most (if not all) levels of an organisation, decisions are reached by some form of consensus.

Should we trust humans to make decisions that best align with the global objectives of the organisation? People often fail to see beyond the costs and benefits arising from their interactions with their \emph{local} environments; few individuals have a holistic understanding of their role in the global picture of interactions. We live in a remarkable time in history (which is decidedly not at its end) when democratic decisions, entangled with advances in communication and new ways of influencing people, have shook the Western liberal-democratic political system to its core.

Nonetheless in the pre-SkyNet era, humans are the only candidates as the atoms of organisations. The question is how people should be organised to make `better' decisions. Here we present a mathematical model for decision making processes in an organisation. We assume in a corporate setting there is a well-defined `global' problem, in the sense that there is a measure to compare how well two solutions solve the same problem. A solution is a set of decisions, of which there are many.

Each person, or agent, has a decision to make. It can choose between several actions. Four characteristics fully define an agent:
\begin{enumerate}
\item the individual actions available to the agents (capabilities);
\item the bias of agents towards certain actions;
\item how actions of other agents affect an agent's bias; and
\item who the agent talks with.
\end{enumerate}
The first three features give rise to a global network describing the dependencies between agents. The position of the agent in this \textbf{dependency network} defines the influence relations between agents. The \textbf{social network} of the organisation emerges from the last feature.

Ideally, the social network of an organisation should be built around the dependency network; people whose actions highly could highly bias one another should communicate and coordinate. However, agents may not be fully aware of the full extent of the dependency network, diminishing the chance of communication between parties that influence one another. Moreover, there is a social cost involved in communication, and agents can only maintain a limited number of agents in its social sphere; thus given a sufficiently complex problem agents inevitably will fail to communicate with all of its neighbours in the dependency network.

The social network on the same level of organisational hierarchy are often structured into closely knit teams with fairly little communication between teams. Yet the actual dependency between individuals across these teams might be important. The particular problem we are investigating is called a coordination game, where an agent only deems it desirable to coordinate if sufficiently many of its neighbours on the dependency network decide to coordinate. The global objective of the organisation is for as many agents to coordinate. This dynamics of persuasion can be mapped onto threshold contagion models on networks, where a disease or `idea' spreads along a network of people. The crucial insight of this study is that coordinating agents display what is known as critical behaviour - the physics of phase transitions, boiling kettles and magnets - where the behaviour of collective systems experience abrupt changes when the parameters of the system, in our case, the network topology and agent behaviour, shift ever so slightly across an invisible threshold.

Another crucial insight is derived when we survey different network models for the social and dependency networks and observe how they influence the spread of innovation. In particular we compare the effects of community structure on social contagion with networks that are community agnostic.

We will start with a statement of our mathematical model.

\section{Model}

We suppose there are $N$ agents working in an organisation. We follow the standard game theory agent model. Each agent $i$ has a set of actions $A_i$ and a utility function $u_i: A_1 \times \cdots A_N \to \mathbb{R}$ which assigns to each state of the system, which we define to be the collection of all the actions of the agents, a real value which we call the utility of the state to agent $i$. Given the actions of all the other agents, each agent $i$ will selfishly try to choose an action out its own set of actions $A_i$ to maximise its own utility.

In our model we assume each agent's utility is only biased by a small number of agents in the system. We construct a dependency network of influence and constraints by drawing an edge between agents whose utilities depend on one another. In our simplification we assume that inflence is reflexive i.e. $u_i  = u_i(a_i, a_j, \ldots) \Leftrightarrow u_j = u_j(a_j, a_i, \ldots)$, such that the dependency network is undirected.

As a simple model for agents adapting to new ideas in an organisation we consider the coordination game \cite{shoham_multiagent_2008} \cite{jackson_games_2014} being played out on a dependency network. In the coordination game each agent has two actions $A_i = \qty{0,1}$, where $a_i=0$ is what we call the default action and $a_i=1$ is the novel action, which represents innovation. If the agent chooses the default action $a_i=0$, the utility will always be neutral $u_i(a_i=0 \ \lvert \ a_{-i})=0$. However, if the agent elects to implement the novel action, two scenarios may arise. If a sufficiently large fraction $r_i \in [0,1]$ of its neighbours in the dependency network decide to coordinate, then the agent will receive a positive utility $u_i > 0$, and the logical action of the agent would then be to commit to the novel action. However if there are fewer than a fraction $r_i$ of neighbours in the neighbourhood to prompt the agent to innovate, the $u_i < 0$, and the best response of the agent would be return to the default action. This simple dynamic simulates the resistance to the uptake of new ideas, and the effects of constraints imposed by other agents in an organisation in deterring innnovation. We say the global objective of the organisation is to have as many agents adopt the novel action.

To characterise a population's tendency to accept new ideas, we suppose each agent samples their persuasion threshold $r_i$ from some distribution. Following Gleeson's example \cite{gleeson_seed_2007}, we suppose the distribution is a Gaussian with standard deviation $\sigma = 0.2$ and mean $r$, a parameter which we tune to adjust the characteristic of the population. Agents with $r_i<0$ will always elect to adopt new ideas. Gleeson \cite{gleeson_seed_2007} aptly refers to these agents as innovators. We need innovators to initiate the spread of $a=1$ across the population of agents. As we increase $r$, there will be fewer innovators in the population and the aggregate tolerance of new ideas is decreased.

In the case where the social network matches the dependency network, the only condition for innovation to `infect' an agent is for the agent to be exposed to sufficiently many innovative neighbours is the dependency network. However, once we decouple the social network from the dependency network, the agents need to prompted by neighbours in its social network to be aware of innovation and consider adopting it. Thus an agent is in one of three states at any time: unaware and susceptible, aware and susceptible, and aware and infected. In this regard our model is similar to the multiplex SIR contact infection models in \cite{granell_dynamical_2013}. We study two types of social interactions. In the first case, the social awareness threshold of a node, which is the smallest fraction of innovating neighbours to make a previously unaware node aware of innovation, is sampled independently from the same distribution as the depedendency threshold. This is the model studied by Lee, Brummitt and Goh \cite{lee_threshold_2014}. In the second case, an agent is aware if only one of its neighbours decides to innovate. The model we study here is a special case of the

We consider two ways which the social and dependency networks could decouple. We could take a social network and either (a) swap pairs of nodes, or (b) swap pairs of edges to obtain the dependency network (or vice versa). (a) represents the social network failing to catch up with changes in role of agents the dependency network, while (b) represents an actual change in dependency. In (a), the perturbed dependency network has the same network topology but a different correspondence between nodes between the social and dependency layers, whereas in (b) we can think of the nodes maintaing the same correspondence between layers but the network topology being altered as the two networks decouple.


The nodes update their actions according to the following rules which is widely accepted as a standard in network epidemiology literature \cite{watts_simple_2002} \cite{gleeson_seed_2007} and network game theory literature \cite{jackson_games_2014}. Firstly, the initial infected population is identified: these may be `seeds' of coordinating agents which we put in by hand, or innovators with negative thresholds. Then nodes in the $0$ state update their responses synchronously according to the information they receive and the agents whom they depend on. Once the nodes decide to innovate, they will remain in the state of innovation. We use the final fraction of infected agents $\rho$ as a measure of the success of the spread of innovation in the organisation. In our simulations we will see how $\rho$ decreases as the number of node or edge swaps increase in both (a) and (b) modes of decoupling. In our analytical study we compute the `cascade threshold', the maximal value of $R$ greater than which the population would not adopt new behaviour in the limit of infinite swaps. We compare the single layer case to the duplex social + dependency network model, and observe the influence of decoupled social awareness on the cascade of innovation.

We consider two classes of random networks. The first class are Erdős-Renyi graphs \cite{erdos_random_1959} where an edge between two nodes is present in the graph with probability $p$. The second class of networks are `planted partition models' \cite{karrer_stochastic_2011}, where agents are partitioned into tightly connected communities with only a few edges between agents int different communities. The first class is amenable to analytical analysis while we will make empirical observations about the properties of the latter from simulations.


\section{Theory}
\subsection{Watts-Gleeson theory of single network contagion}
The theory of cascades on large random graphs generated by degree distributions following the aforementioned dynamical rules was first studied by Watts \cite{watts_simple_2002} and a full account was later given by Gleeson \cite{gleeson_seed_2007}. Their theory rigorously holds for large random graphs that are locally treelike, where clustering (the probability that a triple of connected nodes froms a triangle) is negligible.

Here we summarise the motivations and results of Gleeson's theory \cite{gleeson_seed_2007}. Let us consider a locally tree-like infinite random graph with a degree distribution $p(k)$ and select a node which we designate as the top of the tree. We consider the probability that an infection initiated infinitely far away from the top node at the leaves of a tree infects the top node. Since the node was chosen arbitrarily, this probability is the probability of any node being infected by the cascade initiated by the initial infected population in an infinite network. This probability is also the steady state fraction of infected nodes $\rho$. We suppose a fraction $\rho_0$ of nodes are initially infected.

We assume that the nodes update their actions starting from the leaves of the tree, which we designate to be level $n=0$, and sequentially up  the levels from $n$ to $n+1$ until it reaches the nodes in the neighbourhood of the top node, which we designate to be level $n = \infty$. Let $q_n$ be the probability that a node on level $n$ is infected in the $a=1$ state conditioned on its parent on level $n+1$ being in the default $a=0$ state. Since the nodes are updated sequentially up the levels of the tree, $q_{n+1}$ is only dependent on $q_n$, and the dependency is mediated by a propagator $g$
\begin{equation}
q_{n+1} = G(q_n) = \rho_0 + (1-\rho_0)g(q_n)\qq{for}n=0,1,2,\ldots\ ; \ q_0 = \rho_0,
\end{equation}
which is a function dependent on the degree distribution of the network and the threshold conditions but independent of the level of the tree $n$. Since $q$ is a probability, it is bounded between $q \in [0,1]$. Therefore $G: [0,1] \to [0,1]$ is a map from a unit interval to itself. If $G$ is a continuous function (which it is), then by Brouwer's fixed point theorem there must be at least one fixed point where $q = G(q)$. As the updating process reaches the top of the tree $n\to \infty$ -analogous to evolving a dynamical system to infinite time -  $q_n$ must converge on a stable fixed point $q_\infty$. Thus the probability of infecting the top node, or the final fraction of infected nodes $\rho$, is simply a function of $q_\infty$ and the initially infected population.

We proceed with the derivation of the analytic forms of the functions $g$ and $\rho$. For notational convenience, we let the binomial probability to be
\begin{equation}
B^k_m(q) = {k \choose m} q^m (1-q)^{k-m}
\end{equation}
and define the response function $F(x)$ to be the probability that the infection threshold of a node is smaller than $x$.

We start with the derivation of $\rho$. Suppose the top node in consideration is not in the initial infected population. Then the probability that the node is infected is simply the probability that the infection threshold is less than $m/k$, where $k$ is the degree of the node and $m$ is the number of infected neighbours. Since the probability of a neighbour being infected is simply $q_\infty$, we write down a binomial distribution for $m$. We sum over all $m$ and all $k$ to find the probability that an uninfected top node is infected upon update. Taking into consideration that it may be initially infected, we can write down the final fraction as.
\begin{equation}
\rho = \rho_0 + (1-\rho_0) \sum_{k=1}^\infty p_k \sum_{m=0}^k  B^k_m(q_\infty) F(\frac{m}{k}).
\end{equation}
$g(q_n)$ is the probability that an uninfected node in layer $n+1$ is infected when it updates its action. Thus $g(q)$ is much similar to $\rho(q_\infty)$ in form. However since it is given that the node is only infected by its children in layer $n$, the binomial distribution now runs from $m=0, \ldots, k-1$, and the probability distribution for the degree of the node is replaced by the probability of reaching a node of degree $k$ by following an edge from the parent node on level $n+2$, which is $kp_k/z$ \cite{newman_random_2001}, where $z = \expval{k}$. Thus the expression for $g(q)$ is
\begin{equation}
g(q) = \sum_{k=1}^\infty \frac{k}{z}p_k\sum_{m=0}^{k-1}B^{k-1}_m(q)F(m/k).
\end{equation}

\begin{figure}[htb]
\centering
\begin{subfigure}[b]{0.8\textwidth}
\centering
\includegraphics[width=0.8\textwidth]{new_figs/single_layer_gq}
\end{subfigure}

\begin{subfigure}[b]{0.8\textwidth}
\centering
\includegraphics[width=0.8\textwidth]{new_figs/single_gq_critical}
\end{subfigure}
\caption{ \label{fig:stability_plot} $g(q)-q$ with different $(r,z)$ parameters. Top: $z=4$;  solid line $r=0.35$, dashed line $r=0.371$; Bottom: $z = 3.136$, solid line $r=0.35$, dot-dashed line $r=0.3543$, dashed line $r=0.375$.}
\end{figure}

We are interested in the dynamics in the $\rho_0 \to 0$ limit and thus focus our attention on the dynamical behaviour of the recursion $q_{n+1} \leftarrow g(q_n)$. In particular, we would like to find the fixed points of the recursion and assess its stability. Gleeson demonstrated that in certain regimes of parameter space $(z,r)$, there are multiple fixed points $q_\infty(z,r)$ and these fixed points display bifurcating behaviour. Here we reproduce some results from Gleeson's paper. To better understand the effect of $(z,r)$ on the stability of the fixed points, we plot $g(q)-q$ vs $q$ for $z=4$ and $r=0.35$, $r=0.371$ in the top figure of figure \ref{fig:stability_plot}. We see that for the lower threshold value $r=0.35$ (solid curve) there is only one fixed point $q_\infty$ (the intersection with the horizontal axis) close to one. This fixed point attracts any value of $q$, since for $q < q_\infty$ the change in $q$ per update $g(q)-q$ is positive; and for $q > q_\infty$ we see that $g(q)-q $ is negative. The iterative update of $q$ starting from any point away from $q_\infty$ would converge onto $q_\infty$. However, as we increase $r$, the rate curve $g(q)-q$ deforms continuously until there are multiple roots of $g(q)-q$, as in the case of $r=0.371$ in figure \ref{fig:stability_plot}. Two of the roots outer roots are stable but the inner root is unstable. If we consider iterations from $q_0$ close to 0, it would never reach the fixed point close to one and the infection would not be extensive across the population.

\begin{figure}
\centering
\includegraphics[width=0.5\textwidth]{figures/single_layer_cascade}
\caption{\label{fig:single_phase}Single Layer Erdős-Renyi Graph Phase transition boundary: discontinuity in $q_\infty(z,r)$}
\end{figure}

As we vary $(r,z)$, we can bring the two left most roots of $g(q)$ closer together. Two roots become one if the roots coincide with the turning point between them. Since the positions of the roots vary continuously with $(r,z)$ the double root constraint defines a continuously parametrised line in the $(r,z)$ plane, separating $(r,z)$ systems where there are three roots and $(r,z)$ systems where there are one \cite{gleeson_seed_2007}. This line terminates at a critical point $(r_c,z_c)$ where three roots become one, where there exists a value of $q$ such that
\begin{equation}
g(q) = q,\ \dv{g}{q} - 1 =0 \qand \dv[2]{g}{q} = 0.
\end{equation}
We can observe the triple root in the dot-dashed line of the bottom figure of \ref{fig:stability_plot} and the phase transition line on the $(r,z)$ plane in figure\ref{fig:single_phase}.


\begin{figure}
    \centering
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{figures/one_layer_qz_r035}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{figures/one_layer_qz_r0371}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
    %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{figures/one_layer_qz_r0375}
    \end{subfigure}

    \caption{Fixed points of $q$ for increasing $r$. \label{fig:single_qz}.}
\end{figure}

Varying $(r,z)$ across the double root curve leads to a discontinuous variation in the value of $q_\infty$. Let us consider several cross sections of the surface $q_\infty(z,r)$ to elucidate this idea. In figure \ref{fig:single_qz} we fix the adoption threshold parameter $r$ and vary the mean degree of the network $z$.  At small values of $r$, we see a single stable fixed point, with $q_\infty$ smoothly increasing as we increase $z$. The growth of $q_\infty$ becomes rather steep in some region of $z$ and levels off to a value close to 1 at large values of $z$. At a critical value of $r$ multiple fixed points appear with alternating stability and we observe several saddle point bifurcations. Since we iterate $q$ from $q_0 \ll 1$, the system will always end up on the lowest possible branch. We observe that in some intermediate regime of the threshold parameter there are discontinuous upward and downward leaps between lower branches of $q_\infty$, where the infection is contained, and the upper branches, where the infection is extensive in the system. In the last plot where $r$ is large, iterating $q$ from $0$ will alway lead to system to the lower branch of $q_\infty$ and the infection will never be extensive. We could instead fix $z$ and examine the effects of varying $r$. We observe the same discontinuous transitions in \ref{fig:single_qr}. For $z=2$, increasing the threshold parameter $r$ smoothly decreases $q_\infty$. However, at $z=6$ a saddle node bifurcation appears around $r \approx 0.37$ and $q_\infty$ drops discontinuously from the upper branch ($q$ close to 1) to the lower branch ($q \sim \order{10^{-1}}$).

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{figures/one_layer_qr_z2}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{figures/one_layer_qr_z6}
    \end{subfigure}

    \caption{Fixed points of $q$ for increasing $z$. \label{fig:single_qr}.}
\end{figure}


These observations allow us to make a succinct qualitative summary of the effects of network topology and agent thresholds on the spread of ideas in a population of individuals in a single layer network. In the low threshold regime, the increase in network connectivity aids the spread of ideas, while in the intermediate threshold regime there is a `goldilocks zone' of values of $z$ where ideas can cascade extensively across the population; on either side of agents are either too sparsely connected for the contagion to become extensive or are become overly constrained by the influence of its neighbours too spark an initial adoption. Finally, if the threshold parameter is too large, then the infection will never cascade extensively because agents in the neighbourhood of the few available innovators are too constrained by other neighbours to adopt new ideas.

We make one final remark to complete the theoretical picture. On the phase transition boundary where there is a double root, we can write, without loss of generality, $g(q) - q = (q-q_\infty)^2 f(q)$ where $q_\infty$ is the double root and $f(q)$ is some analytical function which is nonzero at $q_\infty$. As $q$, iterated from $q = \rho_0 \ll 1$, approaches $q_\infty$, the rate of approach $g(q) - q \sim (q-q_\infty)^2$. If we naively in a continuum limit write down an approximate rate equation in the vicinity of $q_\infty$,
\begin{equation}
\dv{q}{t} = g(q) - q \sim (q-q_\infty)^\beta,
\end{equation}
where $\beta = 2$ for the double root, we realise the the time scale of approach diverges in a scaling law $t \sim (q_\infty-q)^{-1}$ for $q < q_\infty$. If we write down a similar equation for a single root where $\beta = 1$, we get that $q$ approaches $q_\infty$ at an exponentially slow rate, where the timescale of approach scales like $t \sim - \ln(\vqty{q_\infty-q})$. Thus the time scale of approach diverges at a much quicker rate at phase boundaries. Lee, Brummitt and Goh iteratively computed $q_\infty$ by brute force repeated application of $g(q)$ on itself (for multiplex networks) and showed that the number of iterations for $q$ to converge to $q_\infty$ explodes asymptotically at the phase transition boundary. They compared this phenomenon to the divergence of relaxation time at phase transitions in critical phenomena \cite{lee_threshold_2014}. A similar study on a variant of the threshold model by Wang et. al. also reports a divergence in the number of iterations needed to converge at phase boundaries \cite{wang_social_2018}.

From an organisational perspective, if the fraction of innovating agents $q_n$ in successive layers of the organisational network experiences a `critical slow down' in its propagation (i.e. agents infinitely far away from the cascade is slow to converge on a stable fraction $q_n$), this could be a tell-tale signal for the organisation that its organisational and dependency structure is poised on the cusp of enabling innovation.


\subsection{Symmetric Two-layer Watts-Gleeson Theory}
In a symmetric duplex system, we follow the extension on Gleeson's work by Lee, Brummitt and Goh in \cite{brummitt_multiplexity-facilitated_2012} and \cite{lee_threshold_2014}. We have a joint distribution for the degrees in both layers $p(\vb{k}) = p(k, k')$, where $k$ denotes the degree in the social network and $k'$ denotes the degree in the dependency network. In the case where the nodes in the social network are swapped to produce the dependency network $p(\vb{k}) \to p(k)p(k')$ in the limit of a large number of swaps; by effectively relabelling the nodes in the network, given a sufficiently large number of nodes, the degree of a node in the dependency network would be uncorrelated with it's degree in social network. In the case where the edges are swapped, the degree in the dependency network is preserved, hence $p(\vb{k}) \to p(k)\delta_{k,k'}$ in the large number of swap limit.

Let $F(\vb{m}, \vb{k})$ be the response function. To simplify the analysis, we assume the threshold for the transfer of awareness in the social network and the threshold for coordination in the dependency network are independently drawn from $\mathcal{N}(r, 0.2)$; hence the response function, which is the probability that the thresholds of the node is below $m/k$ and $m'/k'$ in both networks, is simply
\begin{equation}
F(\vb{m}, \vb{k}) = \Phi\qty(m/k)\Phi\qty(m'/k')
\end{equation}
where $\Phi$ is the cumulative distribution function for the normal distribution:
\begin{equation}
\Phi(x) = \int_{-\infty}^x \frac{1}{\sqrt{2\pi \sigma}} \exp\qty(-\frac{(x-r)^2}{2\sigma^2}).
\end{equation}
In the duplex situation, we refer readers to \cite{lee_threshold_2014} for derivatoins of the expression for final infection fraction
\begin{equation}
\rho = \rho_0 + (1-\rho_0) \sum_{\vb{k}=0}^{\infty}p(\vb{k})\sum_{m=0}^k\sum_{m=0}^{k'}B^{k}_m(q_\infty)B^{k'}_{m'}(q'_\infty)F(\vb{m}, \vb{k})
\end{equation}
where $\vb{q}_\infty = (q_\infty, q'_\infty)$ is the fixed point of the recursive iteration
\begin{equation}
\vb{q}_{n+1} = \vb{G}(\vb{q}_n).
\end{equation}
and the function $\vb{G}(\vb{q}) = (G(\vb{q}), G'(\vb{q}) )$ is defined to be
\begin{align}
G(\vb{q}) &= \rho_0 + (1-\rho_0) \sum_{k=1}^\infty \sum_{k'=0}^\infty\frac{k}{z}p(\vb{k}) \sum_{m=0}^{k-1}\sum_{m'=0}^{k'}B^{k-1}_m(q)B^{k'}_{m'}(q')F(\vb{m}, \vb{k})\\
G'(\vb{q}) &= \rho_0 + (1-\rho_0) \sum_{k'=1}^\infty \sum_{k=0}^\infty\frac{k'}{z}p(\vb{k}) \sum_{m'=0}^{k'-1}\sum_{m=0}^{k}B^{k'-1}_m(q')B^{k}_{m}(q)F(\vb{m}, \vb{k})
\end{align}
Since we have assumed that the response thresholds in both layers are drawn from the same distribution, and by doing so making $F(\vb{m}, \vb{k})$ symmetric in the variables both network layers, we observe that
\begin{equation}
G(q, q') = G'(q', q).
\end{equation}
Thus if we assume $q_0 = q'_0 (= \rho_0)$, we have $q_n = q_n'$ for all $n$, and we only need to concern ourselves with one equation:
\begin{equation}
G(q) = G(q, q) = \rho_0 + (1-\rho_0) \sum_{k=1}^\infty \sum_{k'=0}^\infty\frac{k}{z}p(\vb{k}) \sum_{m=0}^{k-1}\sum_{m'=0}^{k'}B^{k-1}_m(q)B^{k'}_{m'}(q)F(\vb{m}, \vb{k}).
\end{equation}
Moreover the fact that $F(\vb{m}, \vb{k})$ is separable into  $F(\vb{m}, \vb{k}) = \Phi\qty(m/k)\Phi\qty(m'/k')$, we can make one final simplification:
\begin{align}
\rho &= \rho_0 + (1-\rho_0) \sum_{\vb{k}=0}^{\infty}p(\vb{k})\qty(\sum_{m=0}^k B^{k}_m(q_\infty)\Phi\qty(m/k))^2 \\
G(q) &= \rho_0 + (1-\rho_0) \sum_{k=1}^\infty \sum_{k'=0}^\infty\frac{k}{z}p(\vb{k}) \qty(\sum_{m=0}^{k-1}B^{k-1}_m(q)\Phi\qty(m/k))\qty(\sum_{m'=0}^{k'}B^{k'}_{m'}(q)\Phi\qty(m'/k')).
\end{align}

Writing $G(q) = \rho_0 + (1-\rho_0)g(q)$, the corresponding $g$ propagator for the edge swap case $p(\vb{k}) = p(k)\delta_{k,k'}$ is
\begin{equation}
g(q) =  \sum_{k=1}^\infty \frac{k}{z}p(k) \qty(\sum_{m=0}^{k-1}B^{k-1}_m(q)\Phi\qty(m/k))\qty(\sum_{m'=0}^{k}B^{k}_{m'}(q)\Phi\qty(m'/k))
\end{equation}
and the equivalent one for node swap is
\begin{equation}
g(q) =  \qty(\sum_{k=1}^\infty \frac{k}{z}p(k)\sum_{m=0}^{k-1}B^{k-1}_m(q)\Phi\qty(m/k))\qty(\sum_{k'=0}^\infty\sum_{m'=0}^{k'}p(k')B^{k'}_{m'}(q)\Phi\qty(m'/k')).
\end{equation}

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{new_figs/two_layer_node_qz_r015}
    \end{subfigure}
    ~ %add desired spacimng between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{new_figs/two_layer_node_qz_r019}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
    %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{new_figs/two_layer_node_qz_r02}
    \end{subfigure}

    \caption{Fixed points of $q$ for increasing $r$ in node swap duplex network. \label{fig:double_node_qz}.}
\end{figure}

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{new_figs/two_layer_edge_qz_r015}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{new_figs/two_layer_edge_qz_r019}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
    %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.4\textwidth}
        \includegraphics[width=\textwidth]{new_figs/two_layer_edge_qz_r02}
    \end{subfigure}

    \caption{Fixed points of $q$ for increasing $r$ in edge swap duplex network. \label{fig:double_edge_qz}.}
\end{figure}

\begin{figure}
\centering
\includegraphics[width=0.5\textwidth]{new_figs/fullphase}
\caption{Blue: phase transition boundary for single layer network. Magenta: phase transition boundary for node swap duplex network. Orange boundary: phase transition boundary for edge swap duplex network. \label{fig:fullphase}}
\end{figure}
In both cases the fixed point behaviour is qualitatively similar to that of the single layer case. We show $q_\infty(z,r)$ vs $z$ for different values of $r$ in figures \ref{fig:double_node_qz} (node swap) and \ref{fig:double_edge_qz} (edge swap). Similar to the single layer network dynamics, we observe saddle point bifurcations where $g(q)-q$ has a double root as the threshold parameter $r$ is increased. At $r \approx 0.15$ we observe a critical point for both node swap duplex and edge swap duplex networks where there is a single triple root of $g(q)-q$ which signifies the termination of the phase transition boundary. We show the phase diagram in figure \ref{fig:fullphase}. In both node swap and edge swap duplex networks We see that after applying the duplex construction, the region to the left of the boundary, which is where the infection is extensive, is greatly reduced. We emphasise that flattening both duplex layers into one, which creates an Erdős-Renyi graph with double the average degree of the individual networks in each layer, produces an entirely different behaviour to the duplex construction. Doubling the single layer does not map the corresponding phase boundary onto that of the duplex constructions.


\section{Simulations Results}
\subsection{Two layer Erdős-Renyi Graphs}
\subsubsection{Symmetric threshold parameter}

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/er_node}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/er_edge}
    \end{subfigure}

    \caption{Top: Simulations of Final infection size $\rho(z,r)$ for Erdős-Renyi node swap decoupling. Bottom: Final infection size $\rho(z,r)$ for Erdős-Renyi edge swap decoupling. Overlays are theoretical phase transition boundaries. }
\end{figure}
We consider the case of creating two layers of networks by taking an existing Erdős-Renyi graph, which we model as the social network, and randomly swapping all edges or nodes in the graph to create a dependency network that has decoupled from the original social network. In this set up the social and dependency threhsolds are drawn from the same distribution $\mathcal{N}(r, 0.2)$. We plot the theoretical second order cascade conditions \cite{gleeson_seed_2007} overlaid on top of simulation results of the final infection fraction $\rho_0$ of ER graphs of 10000 nodes over $50$ simulations for each data point. As the plot shows the second order cascade condition accurately captures the presence of discontinuities in the $(z,r)$ phase plane. Comparing node swap and edge swap, we see that the set of graphs that achieve infection phase under node swap is a subset of those under edge swap; edge swap decoupling admits somewhat macroscopic ($\rho \sim 0.5$) infection sizes for low degree and low threshold graphs, while agents on the same graphs would fail to coordinate if the network was decoupled by node swap. The phase transition boundary for both graphs has significantly receded to the lower threshold regime when compared to the single layer case. The analysis on the critical slowing down at phase transition boundaries in the single layer case still apply as we observe the same phenomenology of multiplicity of roots in $g(q)-q$. .


\subsubsection{Awareness by Social contact}

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/er_hetero_node}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/er_hetero_edge}
    \end{subfigure}

    \caption{\label{fig:er_hetero}. Awareness initiated by social contact. Top: Simulations of Final infection size $\rho(z,r)$ for Erdős-Renyi node swap decoupling. Blue line is the single layer phase transition line and white line is the two-layer symmetric cascade conditions. Bottom: Final infection size $\rho(z,r)$ for Erdős-Renyi edge swap decoupling. }
\end{figure}
We then considered the case where agents achieve social awareness by social contact; to be aware an agent need only have one neighbour innovating. This relaxation of social threshold in both node swap and edge swap cases significantly thickens the region of phase space where extensive infection occurs. While the region of extensive infection does not meet the phase transition boundary of the single layer case, it greatly exceeds the region of the double layer symmetric threshold model. This suggests that even after decoupling the social and dependency network, an Erdős-Renyi organisation with agents who are highly aware of innovation can innovate at dependency thresholds that are close to that of a single layer without decoupling.
\begin{figure}
\centering
\includegraphics[width=0.6\textwidth]{new_figs/pp_single}
\caption{\label{fig:pp_single} Final infection size phase plane of single layer planted partition graph. Blue line is the overlay of Erdős-Renyi phase transition line.}
\end{figure}

\subsection{Planted Partition Models}
In our simulations of planted partition models, we segregate nodes into 100 communities of 100 nodes and set the average extra-community degree (number of edges with nodes in other communities per node) to 0.5, and vary the degree $z$ by increasing the intra-community degree. As a control experiment, we simulated the infection dynamics on a single layer planted partition graph model for 50 simulations per cell on the phase plane. The results are displayed in figure \ref{fig:pp_single}. The behaviour is remarkably similar to that of an unclustered Erdős-Renyi graph, the edge of the extensive infection region meeting the edge of the phase transition boundary of the single layer Erdős-Renyi graph.

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/pp_node}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/pp_edge}
    \end{subfigure}

    \caption{\label{fig:pp} Top: Simulations results of final infection size $\rho(z,r)$ for Planted Partition node swap duplex. Bottom: Final infection size $\rho(z,r)$ for Planted Partition edge swap duplex. }
\end{figure}
\subsubsection{Symmetric threshold parameter}
We take an existing Planted Partition graph, which we model as the social network, and randomly swap all edges or nodes in the graph to create a dependency network that has decoupled from the original social network (see figure \ref{fig:pp}). For each cell in the phase diagram we conduct $50$ simulations. While the Erdős-Renyi phase transition boundaries is a good predictor for the boundary between no infection and extensive infection in both node swap and edge swap duplex networks, we observe striking differences between the maximum fraction of infected nodes between the two cases, unlike duplex Erdős-Renyi networks where the final fraction size in the extensive infection phase is close to 1 in both edge swap and node swap. While the fraction of infected nodes after edge swaps is close to 1, the fraction of infected nodes after node swaps is close to 0.3. We believe this difference can be attributed to the fact that edge swap reduces the dependency layer to a standard Erdős-Renyi graph, while the dependency layer after node swap is still a planted partition network. In the case of edge swap, agents clustered in communities are innovating in a space of random dependencies. However, in the case of node swaps, the agents from different communities in the dependency structure are forced into social communities that have little correlation with theird dependency communities. Moreover since the extra-community degree in both layers are fixed to be 0.5 it is extremely unlikely that a node in the social network connects with a node in the same social community. We also believe that this is correlated with the lack of degree correlatoin between social and dependency networks after node swap. Agents with high degrees in the dependency network are not biased to retain a high degree in the social network, and agents with low degress in the dependency network would more likely become more connected in the social network. Influential nodes thus suffer from reduced social sphere after node swap and information is only transmitted socially by nodes with a log degree of influence which can only push a limited number of nodes over the dependency thresholds. Given a community structure, not only are influential nodes less socially aware, their social outlook are also more insular. Since infections under edge swap are remain extensive, we postulate that it is the combination of both effects that contribute to why decoupled planted partition networks are less effective in inducing system wide infection.

Why do we see a very similar sharp transition in both duplex configurations, despite the difference in the final fraction size? In systems to the right of the transition systems innovation was never transferred beyond the immediate neighbourhood of the innovators. Since iterations are initiated at $q_0 = \rho_0 \to 0$, the necessary conditions for any infection to grow past the first layer of the network is $\lim_{q\to 0} g(q) - q >0$. We can thus partition the phase plane into two regions separated by the line $\lim_{q\to 0} g(q) - q =0$. This line is what Watts and Gleeson call a cascade condition \cite{watts_simple_2002} \cite{gleeson_seed_2007}, which is nothing more than an approximate condition for the existence of a fixed point $q_\infty \ll 1$. Indeed for such a fixed point to be an attracting set for initial conditions $q_0 = \rho_0 \to 0$, we demand $g(q) - q > 0$ for $0 \leq q < q_\infty$ and the cascade condition must be satisfied in order for the stable root condition to hold. Violation of the cascade conditions, i.e. $\lim_{q \to 0} g(q)- q< 0$, would mean that the innovators have failed to propagate innovation to their nearest neighbours.

Once innovation manages to spread beyond the immediate neighbourhood, and further more suppose with good confidence that the system is sufficiently far away from the critical point of the phase transition such that there is only one fixed point $q_\infty$ that is `macroscopic', i.e. not $q_\infty \ll 1$. The final fraction size is determined by this fixed point. While the cascade condition takes into account local properties of the system in the neighbourhood of innovators, the final fraction size is a global property of the system since it is the probability whether a node far away from the source of the innovation decides to innovate. Hence we surmise from the fact that the same transition boundary is shared between both duplex constructions that local conditions in randomly chosen neighbourhoods of innovators are similar in both duplex networks. Given that this region is consistent between duplex networks of the same social threshold but varies significantly between duplex networks with different social thresholds imposed, we deduce that the local conditions for the initiation of cascades is more sensitive to the threshold conditions which is a property inherent to agents. However, it is the difference in the size of the final fraction of the nodes reflect the global topological differences between the two duplex networks.

\subsubsection{Awareness by Social contact}

\begin{figure}
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/pp_hetero_node}
    \end{subfigure}

    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/pp_hetero_edge}
    \end{subfigure}
    ~ %add desired spacing between images, e. g. ~, \quad, \qquad, \hfill etc.
      %(or a blank line to force the subfigure onto a new line)
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{new_figs/pp_hetero_reverse_edge}
    \end{subfigure}

    \caption{\label{fig:pp_hetero}Awareness by social contact in Planted Partition model duplex networks. Top: Simulations of final infection size $\rho(z,r)$ node swap duplex. Middle: edge swap duplex with ER Dependency, PP Social. Bottom: edge swap duplex with Dependency = PP, Social = ER. }
\end{figure}

There is an extra subtlely in the case where social awareness is activated by a non-zero number of neighbours in the social network because of the asymmetry in the social and dependency thresholds. In the case of edge swap, we could either keep a planted partition network as the social network and an Erdős-Renyi graph as the dependency network, or take the Erdős-Renyi graph as the social network and overlay a Planted Partition dependency network. However from figure \ref{fig:pp_hetero} we see that both cases show very little qualitative differences. Similar to the Erdős-Renyi case, having a low social threshold helps extend the region of population wide infection on the phase diagram beyond the case of symmetric threshold functions.

In the case of node swap we see a boundary between no infection and some infection in the phase diagram, yet once again the total fraction of infection is reduced. We can conclude that while social threshold conditions affect the conditions for the initiation of cascades, it is the difference betwee the topologies of the social and dependency layers that affect the extent of the infection.

\section{Conclusions}

We set out to understand how agents coordinate to find new innovation given the conditions for coordination are constrained by actions taken by other agents. In particular, we want to study how agents who are unaware of the constraints between them can successfully coordinate in a social setting that bears little correlation with the actual dependency network of mutual constraints.

We operate under standard game theory assumptions where agents are assumed to
be selfish and try their best to maximise a utility value that is dependent on its own actions and actions of other agents. In our set up, we let agents participate in a coordination game where an agent can either choose to innovate or remain in their default state. The utility function is designed such that they would only innovate if sufficiently many of its neighbours above a threshold decide to innovate.

We have defined a dynamical system where agents synchronously update their actions as a response to other agents in their social circle who update their actions in the previous time step. In our theoretical analysis, we discovered that there is a phase transition boundary;  varying the mean degree of an Erdős-Renyi network and the agent threshold across this boundary would result in a discontinuous jump between a phase where coordination is extensive across the system and another where innovation is trapped in the local neighbourhood of innovators.

We have shown that after decoupling the dependency network and social relations between agents into a duplex network by means of node and edge swapping the size of phase space where coordination is extensive is greatly reduced. For the same network degree the agents tip across the phase transition boundary between innovation and no innovation at a far lower dependency threshold.  However, if awareness of agents is simply spread by contact without any threshold conditions, we can overcome the challenges of having a decoupled social and dependency structure and recover a huge part of the $(r,z)$ phase space.

The picture is drastically different if community structures exist in the social and dependency networks but the communities are uncorrelated. Having social communities where the dependencies between members are uncorrelated significantly reduces the final fraction of agents even if the innovation is able to spread beyond the local neighbourhood of innovators.

The most powerful insight from the perspective of an organisational application is the phenomenon of critical slow down at the phase transition boundary between extensive collaboration and localised innovation. Recognising that innovation propagates through layers of an organisation at a time scale that diverges as a power law is a unique signature that the organisation is on the knife edge of coordination failure.

The results of this project and the ideas that it draws on provides a tantalising and theoretically sound starting point for understanding the zoo of dynamics in collective decision making. Further studies can study different types of network topologies that have non-negligible local clustering behaviour, and parametrise correlations between networks in the duplex layer. A model where innovation puts the interests at odds is a crucial behaviour that has not been captured in this model; this approach may find cousins in studies of spin glasses. Finally, a comprehensive theory would need to capture the adaptive nature of social networks. We have assumed here that the social network varies at a much slower scale than the contagion itself. However, our study of `equilibrium' social network behaviour is a necessary control against which behaviour on adaptive social networks can be compared.

\printbibliography
\end{document}
