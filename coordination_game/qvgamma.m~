N = 100;
x = 1:1:N;
for beta = -1.8:-0.2:3.2
beta = -2;
s0= 0.0;
sparams = [N, beta, s0];
g = 0:0.001:1;
q = zeros(length(g), 1);
S = zeros(length(g), 1);

for i = 1:1:length(g)
    [q(i), S(i)] = q_func(g(i),N, @powerlaw, sparams);
end

%p = powerlaw(x,sparams);
%qcrit = 1-1/(p*x.');
plot(q, g, 'b-', 'DisplayName',num2str(beta));
hold on
end

ylabel('gamma');
xlabel('q');
title('q vs gamma');
plot(qcrit*ones(101,1), 0:0.01:1, 'r-');

hold off